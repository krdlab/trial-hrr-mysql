[mysql]
default-character-set=utf8mb4

[mysqld]
datadir=/var/lib/mysql
socket=/var/lib/mysql/mysql.sock
user=mysql
port=3306
# Disabling symbolic-links is recommended to prevent assorted security risks
symbolic-links=0

log_bin = mysql-bin
binlog_format = MIXED
# binlog_format = ROW

character-set-server=utf8mb4
default-storage-engine=InnoDB

innodb_file_format = Barracuda
innodb_file_per_table
innodb_large_prefix

# transaction-isolation=READ-COMMITTED

general_log = 1
general_log_file = /var/log/mysql/general-mysql.log

server-id = {{ ansible_default_ipv4.address | regex_replace('^(.+)\\.(.+)\\.(.+)\\.(.+)$', '\\3\\4') }}

log-error = /var/log/mysql/mysqld.log
pid-file  = /var/run/mysqld/mysqld.pid
